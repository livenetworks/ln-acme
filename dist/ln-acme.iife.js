(function(){"use strict";(function(){const p="data-ln-ajax",d="lnAjax";if(window[d]!==void 0)return;function h(e){if(console.log(e),!e.hasAttribute(p)||e[d])return;e[d]=!0,console.log("constructor called with:",e);let t=f(e);console.log("Items found:",t),b(t.links),y(t.forms)}function b(e){e.forEach(function(t){if(t._lnAjaxAttached)return;const i=t.getAttribute("href");i&&i.includes("#")||(t._lnAjaxAttached=!0,t.addEventListener("click",function(l){if(l.ctrlKey||l.metaKey||l.button===1)return;l.preventDefault();const r=t.getAttribute("href");r&&g("GET",r,null,t)}))})}function y(e){e.forEach(function(t){t._lnAjaxAttached||(t._lnAjaxAttached=!0,t.addEventListener("submit",function(i){i.preventDefault();const l=t.method.toUpperCase(),r=t.action,o=new FormData(t);console.log("Form submitted:",l,r),t.querySelectorAll('button, input[type="submit"]').forEach(function(s){s.disabled=!0}),g(l,r,o,t,function(){t.querySelectorAll('button, input[type="submit"]').forEach(function(s){s.disabled=!1})})}))})}function g(e,t,i,l,r){console.log("Making AJAX request:",e,t),l.classList.add("ln-ajax--loading");let o=document.createElement("span");o.className="ln-ajax-spinner",l.appendChild(o);let s=t;const c=document.querySelector('meta[name="csrf-token"]'),m=c?c.getAttribute("content"):null;i instanceof FormData&&m&&i.append("_token",m);const v={method:e,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}};if(m&&(v.headers["X-CSRF-TOKEN"]=m),e==="GET"&&i){const E=new URLSearchParams(i);s=t+(t.includes("?")?"&":"?")+E.toString()}else e!=="GET"&&i&&(v.body=i);fetch(s,v).then(E=>E.json()).then(E=>{if(E.title&&(document.title=E.title),E.content)for(let _ in E.content){const T=document.getElementById(_);T&&(T.innerHTML=E.content[_])}if(l.tagName==="A"){let _=l.getAttribute("href");_&&window.history.pushState({ajax:!0},"",_)}else l.tagName==="FORM"&&l.method.toUpperCase()==="GET"&&window.history.pushState({ajax:!0},"",s);E.message&&window.lnToast&&window.lnToast.enqueue({type:E.message.type,title:E.message.title,message:E.message.body,data:E.message.data}),l.classList.remove("ln-ajax--loading");let L=l.querySelector(".ln-ajax-spinner");L&&L.remove(),r&&r()}).catch(E=>{console.error("AJAX error:",E),l.classList.remove("ln-ajax--loading");let L=l.querySelector(".ln-ajax-spinner");L&&L.remove(),r&&r()})}function f(e){let t={links:[],forms:[]};if(e.tagName==="A"&&e.getAttribute(p)!=="false")t.links.push(e);else if(e.tagName==="FORM"&&e.getAttribute(p)!=="false")t.forms.push(e);else{let i=e.querySelectorAll('a:not([data-ln-ajax="false"])')||[],l=e.querySelectorAll('form:not([data-ln-ajax="false"])')||[];t.links=Array.from(i),t.forms=Array.from(l)}return t}function a(){new MutationObserver(function(t){t.forEach(function(i){i.type=="childList"&&i.addedNodes.forEach(function(l){l.nodeType===1&&(h(l),l.hasAttribute&&!l.hasAttribute(p)&&l.querySelectorAll("["+p+"]").forEach(function(o){h(o)}))})})}).observe(document.body,{childList:!0,subtree:!0})}a(),window[d]=h;function n(){document.querySelectorAll("["+p+"]").forEach(function(t){h(t)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()})(),(function(){const p="data-ln-modal",d="lnModal";if(window[d]!==void 0)return;function h(n){const e=document.getElementById(n);if(!e){console.warn('Modal with ID "'+n+'" not found');return}e.classList.contains("ln-modal--open")?(e.classList.remove("ln-modal--open"),document.body.classList.remove("ln-modal-open")):(e.classList.add("ln-modal--open"),document.body.classList.add("ln-modal-open"))}function b(n){const e=document.getElementById(n);e&&(e.classList.remove("ln-modal--open"),document.body.classList.remove("ln-modal-open"))}function y(n){const e=n.querySelectorAll("[data-ln-modal-close]"),t=n.id;e.forEach(function(i){i.addEventListener("click",function(l){l.preventDefault(),b(t)})})}function g(n){n.forEach(function(e){e.addEventListener("click",function(t){if(t.ctrlKey||t.metaKey||t.button===1)return;t.preventDefault();const i=e.getAttribute(p);i&&h(i)})})}function f(){const n=document.querySelectorAll("["+p+"]");g(n),document.querySelectorAll("[id]").forEach(function(t){t.classList.contains("ln-modal")&&y(t)}),document.addEventListener("keydown",function(t){(t.key==="Escape"||t.keyCode===27)&&document.querySelectorAll(".ln-modal.ln-modal--open").forEach(function(l){b(l.id)})})}function a(){new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.forEach(function(i){if(i.nodeType===1){i.hasAttribute(p)&&g([i]);const l=i.querySelectorAll("["+p+"]");l.length>0&&g(l),i.id&&i.classList.contains("ln-modal")&&y(i);const r=i.querySelectorAll(".ln-modal");r.length>0&&r.forEach(function(o){y(o)})}})})}).observe(document.body,{childList:!0,subtree:!0})}window[d]={toggle:h,close:b,open:function(n){const e=document.getElementById(n);e&&(e.classList.add("ln-modal--open"),document.body.classList.add("ln-modal-open"))}},a(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f):f()})(),(function(){const p="data-ln-nav",d="lnNav";if(window[d]!==void 0)return;const h=new WeakMap;function b(n){if(!n.hasAttribute(p)||h.has(n))return;const e=n.getAttribute(p);if(!e)return;const t=y(n,e);h.set(n,t)}function y(n,e){let t=Array.from(n.querySelectorAll("a"));f(t,e,window.location.pathname);const i=function(){t=Array.from(n.querySelectorAll("a")),f(t,e,window.location.pathname)};window.addEventListener("popstate",i);const l=history.pushState;history.pushState=function(){l.apply(history,arguments),t=Array.from(n.querySelectorAll("a")),f(t,e,window.location.pathname)};const r=new MutationObserver(function(o){o.forEach(function(s){s.type==="childList"&&(s.addedNodes.forEach(function(c){if(c.nodeType===1){if(c.tagName==="A")t.push(c),f([c],e,window.location.pathname);else if(c.querySelectorAll){const m=Array.from(c.querySelectorAll("a"));t=t.concat(m),f(m,e,window.location.pathname)}}}),s.removedNodes.forEach(function(c){if(c.nodeType===1){if(c.tagName==="A")t=t.filter(function(m){return m!==c});else if(c.querySelectorAll){const m=Array.from(c.querySelectorAll("a"));t=t.filter(function(v){return!m.includes(v)})}}}))})});return r.observe(n,{childList:!0,subtree:!0}),{navElement:n,activeClass:e,observer:r}}function g(n){try{return new URL(n,window.location.href).pathname.replace(/\/$/,"")||"/"}catch{return n.replace(/\/$/,"")||"/"}}function f(n,e,t){const i=g(t);n.forEach(function(l){const r=l.getAttribute("href");if(!r)return;const o=g(r);l.classList.remove(e);const s=o===i,c=o!=="/"&&i.startsWith(o+"/");(s||c)&&l.classList.add(e)})}window[d]=b;function a(){document.querySelectorAll("["+p+"]").forEach(function(e){b(e)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a()})(),(function(){const p=window.TomSelect;if(!p){window.lnSelect={initialize:function(){},destroy:function(){},getInstance:function(){return null}};return}const d=new WeakMap;function h(f){if(d.has(f))return;const a=f.getAttribute("data-ln-select");let n={};if(a&&a.trim()!=="")try{n=JSON.parse(a)}catch(i){console.warn("Invalid JSON in data-ln-select attribute:",i)}const t={...{allowEmptyOption:!0,controlInput:null,create:!1,highlight:!0,closeAfterSelect:!0,placeholder:f.getAttribute("placeholder")||"Select...",loadThrottle:300},...n};try{const i=new p(f,t);d.set(f,i);const l=f.closest("form");l&&l.addEventListener("reset",()=>{setTimeout(()=>{i.clear(),i.clearOptions(),i.sync()},0)})}catch(i){console.error("Failed to initialize Tom Select:",i)}}function b(f){const a=d.get(f);a&&(a.destroy(),d.delete(f))}function y(){document.querySelectorAll("select[data-ln-select]").forEach(h)}function g(){new MutationObserver(a=>{a.forEach(n=>{n.addedNodes.forEach(e=>{e.nodeType===1&&(e.matches&&e.matches("select[data-ln-select]")&&h(e),e.querySelectorAll&&e.querySelectorAll("select[data-ln-select]").forEach(h))}),n.removedNodes.forEach(e=>{e.nodeType===1&&(e.matches&&e.matches("select[data-ln-select]")&&b(e),e.querySelectorAll&&e.querySelectorAll("select[data-ln-select]").forEach(b))})})}).observe(document.body,{childList:!0,subtree:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{y(),g()}):(y(),g()),window.lnSelect={initialize:h,destroy:b,getInstance:f=>d.get(f)}})(),(function(){const p="data-ln-tabs",d="lnTabs";if(window[d]!==void 0&&window[d]!==null)return;function h(a=document.body){b(a)}function b(a){if(a.nodeType!==1)return;let n=Array.from(a.querySelectorAll("["+p+"]"));a.hasAttribute&&a.hasAttribute(p)&&n.push(a),n.forEach(function(e){e[d]||(e[d]=new y(e))})}function y(a){return this.dom=a,g.call(this),this}function g(){this.tabs=Array.from(this.dom.querySelectorAll("[data-ln-tab]")),this.panels=Array.from(this.dom.querySelectorAll("[data-ln-panel]")),this.mapTabs={},this.mapPanels={};for(const a of this.tabs){const n=(a.getAttribute("data-ln-tab")||"").toLowerCase().trim();n&&(this.mapTabs[n]=a)}for(const a of this.panels){const n=(a.getAttribute("data-ln-panel")||"").toLowerCase().trim();n&&(this.mapPanels[n]=a)}this.defaultKey=(this.dom.getAttribute("data-ln-tabs-default")||"").toLowerCase().trim()||Object.keys(this.mapTabs)[0]||"",this.autoFocus=(this.dom.getAttribute("data-ln-tabs-focus")||"true").toLowerCase()!=="false",this.tabs.forEach(a=>{a.addEventListener("click",()=>{const n=(a.getAttribute("data-ln-tab")||"").toLowerCase().trim();n&&(location.hash==="#"+n?this.activate(n):location.hash=n)})}),this._hashHandler=()=>{const a=(location.hash||"").replace("#","").toLowerCase();this.activate(a||this.defaultKey)},window.addEventListener("hashchange",this._hashHandler),this._hashHandler()}y.prototype.activate=function(a){var n;(!a||!(a in this.mapPanels))&&(a=this.defaultKey);for(const e in this.mapTabs){const t=this.mapTabs[e];e===a?(t.setAttribute("data-active",""),t.setAttribute("aria-selected","true")):(t.removeAttribute("data-active"),t.setAttribute("aria-selected","false"))}for(const e in this.mapPanels){const t=this.mapPanels[e],i=e===a;t.classList.toggle("hidden",!i),t.setAttribute("aria-hidden",i?"false":"true")}if(this.autoFocus){const e=(n=this.mapPanels[a])==null?void 0:n.querySelector('input,button,select,textarea,[tabindex]:not([tabindex="-1"])');e&&setTimeout(()=>e.focus({preventScroll:!0}),0)}};function f(){new MutationObserver(function(n){n.forEach(function(e){e.addedNodes.forEach(function(t){b(t)})})}).observe(document.body,{childList:!0,subtree:!0})}f(),window[d]=h,h(document.body)})(),(function(){const p="data-ln-toggle",d="lnToggle";if(window[d]!==void 0)return;function h(n){b(n),y(n)}function b(n){var e=n.querySelectorAll("["+p+"]")||[];n.hasAttribute&&n.hasAttribute(p)&&(e=Array.from(e),e.push(n)),e.forEach(function(t){t[d]||(t[d]=new g(t))})}function y(n){var e=n.querySelectorAll("[data-ln-toggle-for]")||[];n.hasAttribute&&n.hasAttribute("data-ln-toggle-for")&&(e=Array.from(e),e.push(n)),e.forEach(function(t){t.addEventListener("click",function(i){i.preventDefault();var l=t.getAttribute("data-ln-toggle-for"),r=document.getElementById(l);if(!(!r||!r[d])){var o=t.getAttribute("data-ln-toggle-action")||"toggle";r[d][o]()}})})}function g(n){return this.dom=n,this.isOpen=n.getAttribute(p)==="open",this.isOpen&&n.classList.add("open"),this}g.prototype.open=function(){this.isOpen||(this.isOpen=!0,this.dom.classList.add("open"),f(this.dom,"ln-toggle:open",{target:this.dom}))},g.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.dom.classList.remove("open"),f(this.dom,"ln-toggle:close",{target:this.dom}))},g.prototype.toggle=function(){this.isOpen?this.close():this.open()};function f(n,e,t){n.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t||{}}))}function a(){var n=new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.forEach(function(i){i.nodeType===1&&(b(i),y(i))})})});n.observe(document.body,{childList:!0,subtree:!0})}window[d]=h,a(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){h(document.body)}):h(document.body)})(),(function(){const p="data-ln-accordion",d="lnAccordion";if(window[d]!==void 0)return;function h(f){b(f)}function b(f){var a=f.querySelectorAll("["+p+"]")||[];f.hasAttribute&&f.hasAttribute(p)&&(a=Array.from(a),a.push(f)),a.forEach(function(n){n[d]||(n[d]=new y(n))})}function y(f){return this.dom=f,f.addEventListener("ln-toggle:open",function(a){var n=f.querySelectorAll("[data-ln-toggle]");n.forEach(function(e){e!==a.detail.target&&e.lnToggle&&e.lnToggle.isOpen&&e.lnToggle.close()})}),this}function g(){var f=new MutationObserver(function(a){a.forEach(function(n){n.type==="childList"&&n.addedNodes.forEach(function(e){e.nodeType===1&&b(e)})})});f.observe(document.body,{childList:!0,subtree:!0})}window[d]=h,g(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){h(document.body)}):h(document.body)})(),(function(){const p="data-ln-toast",d="lnToast",h={success:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m5 12 5 5L20 7"/></svg>',error:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>',warn:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 1.67 10.42 18.04H1.58L12 1.67z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>',info:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>'};if(window[d]!==void 0&&window[d]!==null)return;function b(r=document.body){return y(r),i}function y(r){if(!r||r.nodeType!==1)return;let o=Array.from(r.querySelectorAll("["+p+"]"));r.hasAttribute&&r.hasAttribute(p)&&o.push(r),o.forEach(s=>{s[d]||new g(s)})}function g(r){return this.dom=r,r[d]=this,this.timeoutDefault=parseInt(r.getAttribute("data-ln-toast-timeout")||"6000",10),this.max=parseInt(r.getAttribute("data-ln-toast-max")||"5",10),Array.from(r.querySelectorAll("[data-ln-toast-item]")).forEach(o=>{f(o)}),this}function f(r){const o=((r.getAttribute("data-type")||"info")+"").toLowerCase(),s=r.getAttribute("data-title"),c=(r.innerText||r.textContent||"").trim();r.className="ln-toast__item",r.removeAttribute("data-ln-toast-item");const m=document.createElement("div");m.className="ln-toast__card ln-toast__card--"+o,m.setAttribute("role",o==="error"?"alert":"status"),m.setAttribute("aria-live",o==="error"?"assertive":"polite");const v=document.createElement("div");v.className="ln-toast__side",v.innerHTML=h[o]||h.info;const E=document.createElement("div");E.className="ln-toast__content";const L=document.createElement("div");L.className="ln-toast__head";const _=document.createElement("strong");_.className="ln-toast__title",_.textContent=s||(o==="success"?"Success":o==="error"?"Error":o==="warn"?"Warning":"Information");const T=document.createElement("button");if(T.type="button",T.className="ln-toast__close",T.setAttribute("aria-label","Close"),T.innerHTML="&times;",T.addEventListener("click",()=>n(r)),L.appendChild(_),E.appendChild(L),E.appendChild(T),c){const S=document.createElement("div");S.className="ln-toast__body";const O=document.createElement("p");O.textContent=c,S.appendChild(O),E.appendChild(S)}m.appendChild(v),m.appendChild(E),r.innerHTML="",r.appendChild(m),requestAnimationFrame(()=>r.classList.add("ln-toast__item--in"))}function a(r,o){for(;r.dom.children.length>=r.max;)r.dom.removeChild(r.dom.firstElementChild);r.dom.appendChild(o),requestAnimationFrame(()=>o.classList.add("ln-toast__item--in"))}function n(r){!r||!r.parentNode||(clearTimeout(r._timer),r.classList.remove("ln-toast__item--in"),r.classList.add("ln-toast__item--out"),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},200))}function e(r={}){let o=r.container;if(typeof o=="string"&&(o=document.querySelector(o)),o instanceof HTMLElement||(o=document.querySelector("["+p+"]")||document.getElementById("ln-toast-container")),!o)return null;const s=o[d]||new g(o),c=Number.isFinite(r.timeout)?r.timeout:s.timeoutDefault,m=(r.type||"info").toLowerCase(),v=document.createElement("li");v.className="ln-toast__item";const E=document.createElement("div");E.className="ln-toast__card ln-toast__card--"+m,E.setAttribute("role",m==="error"?"alert":"status"),E.setAttribute("aria-live",m==="error"?"assertive":"polite");const L=document.createElement("div");L.className="ln-toast__side",L.innerHTML=h[m]||h.info;const _=document.createElement("div");_.className="ln-toast__content";const T=document.createElement("div");T.className="ln-toast__head";const S=document.createElement("strong");S.className="ln-toast__title",S.textContent=r.title||(m==="success"?"Success":m==="error"?"Error":m==="warn"?"Warning":"Information");const O=document.createElement("button");if(O.type="button",O.className="ln-toast__close",O.setAttribute("aria-label","Close"),O.innerHTML="&times;",O.addEventListener("click",()=>n(v)),T.appendChild(S),_.appendChild(T),_.appendChild(O),r.message||r.data&&r.data.errors){const x=document.createElement("div");if(x.className="ln-toast__body",r.message)if(Array.isArray(r.message)){const M=document.createElement("ul");r.message.forEach(function(D){const u=document.createElement("li");u.textContent=D,M.appendChild(u)}),x.appendChild(M)}else{const M=document.createElement("p");M.textContent=r.message,M.style.margin="0",x.appendChild(M)}if(r.data&&r.data.errors){const M=document.createElement("ul");Object.values(r.data.errors).flat().forEach(D=>{const u=document.createElement("li");u.textContent=D,M.appendChild(u)}),x.appendChild(M)}_.appendChild(x)}return E.appendChild(L),E.appendChild(_),v.appendChild(E),a(s,v),c>0&&(v._timer=setTimeout(()=>n(v),c)),v}function t(r){let o=r;typeof o=="string"&&(o=document.querySelector(o)),o instanceof HTMLElement||(o=document.querySelector("["+p+"]")||document.getElementById("ln-toast-container")),o&&Array.from(o.children).forEach(n)}const i=function(r){return b(r)};i.enqueue=e,i.clear=t,new MutationObserver(r=>{r.forEach(o=>o.addedNodes.forEach(s=>y(s)))}).observe(document.body,{childList:!0,subtree:!0}),window[d]=i,window.addEventListener("ln-toast:enqueue",function(r){r.detail&&i.enqueue(r.detail)}),b(document.body)})(),(function(){const p="data-ln-upload",d="lnUpload",h="data-ln-upload-dict",b="data-ln-upload-accept",y="data-ln-upload-context";if(window[d]!==void 0)return;function g(o,s){const c=o.querySelector("["+h+'="'+s+'"]');return c?c.textContent:s}function f(o){if(o===0)return"0 B";const s=1024,c=["B","KB","MB","GB"],m=Math.floor(Math.log(o)/Math.log(s));return parseFloat((o/Math.pow(s,m)).toFixed(1))+" "+c[m]}function a(o){return o.split(".").pop().toLowerCase()}function n(o){return o==="docx"&&(o="doc"),["pdf","doc","epub"].includes(o)?"ln-icon-file-"+o:"ln-icon-file"}function e(o,s){if(!s)return!0;const c="."+a(o.name);return s.split(",").map(function(v){return v.trim().toLowerCase()}).includes(c.toLowerCase())}function t(o,s,c){o.dispatchEvent(new CustomEvent(s,{bubbles:!0,detail:c}))}function i(o){if(o.hasAttribute("data-ln-upload-initialized"))return;o.setAttribute("data-ln-upload-initialized","true");const s=o.querySelector(".ln-upload__zone"),c=o.querySelector(".ln-upload__list"),m=o.getAttribute(b)||"";let v=o.querySelector('input[type="file"]');v||(v=document.createElement("input"),v.type="file",v.multiple=!0,v.style.display="none",m&&(v.accept=m.split(",").map(function(u){return u=u.trim(),u.startsWith(".")?u:"."+u}).join(",")),o.appendChild(v));const E=o.getAttribute(p)||"/files/upload",L=o.getAttribute(y)||"",_=new Map;let T=0;function S(){const u=document.querySelector('meta[name="csrf-token"]');return u?u.getAttribute("content"):""}function O(u){if(!e(u,m)){const w=g(o,"invalid-type");t(o,"ln-upload:invalid",{file:u,message:w}),window.dispatchEvent(new CustomEvent("ln-toast:enqueue",{detail:{type:"error",title:"Invalid File",message:w||"This file type is not allowed"}}));return}const A="file-"+ ++T,C=a(u.name),j=n(C),k=document.createElement("li");k.className="ln-upload__item ln-upload__item--uploading "+j,k.setAttribute("data-file-id",A);const F=document.createElement("span");F.className="ln-upload__name",F.textContent=u.name;const I=document.createElement("span");I.className="ln-upload__size",I.textContent="0%";const N=document.createElement("button");N.type="button",N.className="ln-upload__remove",N.title=g(o,"remove"),N.textContent="Ã—",N.disabled=!0;const U=document.createElement("div");U.className="ln-upload__progress";const z=document.createElement("div");z.className="ln-upload__progress-bar",U.appendChild(z),k.appendChild(F),k.appendChild(I),k.appendChild(N),k.appendChild(U),c.appendChild(k);const R=new FormData;R.append("file",u),R.append("context",L);const q=new XMLHttpRequest;q.upload.addEventListener("progress",function(w){if(w.lengthComputable){const B=Math.round(w.loaded/w.total*100);z.style.width=B+"%",I.textContent=B+"%"}}),q.addEventListener("load",function(){if(q.status>=200&&q.status<300){var w;try{w=JSON.parse(q.responseText)}catch{H("Invalid response");return}k.classList.remove("ln-upload__item--uploading"),I.textContent=f(w.size||u.size),N.disabled=!1,_.set(A,{serverId:w.id,name:w.name,size:w.size}),x(),t(o,"ln-upload:uploaded",{localId:A,serverId:w.id,name:w.name})}else{var B="Upload failed";try{var P=JSON.parse(q.responseText);B=P.message||B}catch{}H(B)}}),q.addEventListener("error",function(){H("Network error")});function H(w){k.classList.remove("ln-upload__item--uploading"),k.classList.add("ln-upload__item--error"),z.style.width="100%",I.textContent=g(o,"error"),N.disabled=!1,t(o,"ln-upload:error",{file:u,message:w}),window.dispatchEvent(new CustomEvent("ln-toast:enqueue",{detail:{type:"error",title:"Upload Error",message:w||g(o,"upload-failed")||"Failed to upload file"}}))}q.open("POST",E),q.setRequestHeader("X-CSRF-TOKEN",S()),q.setRequestHeader("Accept","application/json"),q.send(R)}function x(){o.querySelectorAll('input[name="file_ids[]"]').forEach(function(u){u.remove()}),_.forEach(function(u){const A=document.createElement("input");A.type="hidden",A.name="file_ids[]",A.value=u.serverId,o.appendChild(A)})}function M(u){const A=_.get(u),C=c.querySelector('[data-file-id="'+u+'"]');if(!A||!A.serverId){C&&C.remove(),_.delete(u),x();return}C&&C.classList.add("ln-upload__item--deleting"),fetch("/files/"+A.serverId,{method:"DELETE",headers:{"X-CSRF-TOKEN":S(),Accept:"application/json"}}).then(j=>{j.status===200?(C&&C.remove(),_.delete(u),x(),t(o,"ln-upload:removed",{localId:u,serverId:A.serverId})):(C&&C.classList.remove("ln-upload__item--deleting"),window.dispatchEvent(new CustomEvent("ln-toast:enqueue",{detail:{type:"error",title:"Error",message:g(o,"delete-error")||"Failed to delete file"}})))}).catch(j=>{console.error("Delete error:",j),C&&C.classList.remove("ln-upload__item--deleting"),window.dispatchEvent(new CustomEvent("ln-toast:enqueue",{detail:{type:"error",title:"Network Error",message:"Could not connect to server"}}))})}function D(u){Array.from(u).forEach(function(A){O(A)}),v.value=""}s.addEventListener("click",function(){v.click()}),v.addEventListener("change",function(){D(this.files)}),s.addEventListener("dragenter",function(u){u.preventDefault(),u.stopPropagation(),s.classList.add("ln-upload__zone--dragover")}),s.addEventListener("dragover",function(u){u.preventDefault(),u.stopPropagation(),s.classList.add("ln-upload__zone--dragover")}),s.addEventListener("dragleave",function(u){u.preventDefault(),u.stopPropagation(),s.classList.remove("ln-upload__zone--dragover")}),s.addEventListener("drop",function(u){u.preventDefault(),u.stopPropagation(),s.classList.remove("ln-upload__zone--dragover"),D(u.dataTransfer.files)}),c.addEventListener("click",function(u){if(u.target.classList.contains("ln-upload__remove")){const A=u.target.closest(".ln-upload__item");A&&M(A.getAttribute("data-file-id"))}}),o.lnUploadAPI={getFileIds:function(){return Array.from(_.values()).map(function(u){return u.serverId})},getFiles:function(){return Array.from(_.values())},clear:function(){_.forEach(function(u){u.serverId&&fetch("/files/"+u.serverId,{method:"DELETE",headers:{"X-CSRF-TOKEN":S(),Accept:"application/json"}})}),_.clear(),c.innerHTML="",x(),t(o,"ln-upload:cleared",{})}}}function l(){document.querySelectorAll("["+p+"]").forEach(i)}function r(){new MutationObserver(function(s){s.forEach(function(c){c.type==="childList"&&c.addedNodes.forEach(function(m){m.nodeType===1&&(m.hasAttribute(p)&&i(m),m.querySelectorAll("["+p+"]").forEach(i))})})}).observe(document.body,{childList:!0,subtree:!0})}window[d]={init:i,initAll:l},r(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l()})(),(function(){const p="lnExternalLinks";if(window[p]!==void 0)return;function d(n,e,t){n.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))}function h(n){return n.hostname&&n.hostname!==window.location.hostname}function b(n){n.getAttribute("data-ln-external-link")!=="processed"&&h(n)&&(n.target="_blank",n.rel="noopener noreferrer",n.setAttribute("data-ln-external-link","processed"),d(n,"ln-external-links:processed",{link:n,href:n.href}))}function y(n){n=n||document.body,n.querySelectorAll("a, area").forEach(function(t){b(t)})}function g(){document.body.addEventListener("click",function(n){const e=n.target.closest("a, area");e&&e.getAttribute("data-ln-external-link")==="processed"&&d(e,"ln-external-links:clicked",{link:e,href:e.href,text:e.textContent||e.title||""})})}function f(){new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.forEach(function(i){if(i.nodeType===1){i.matches&&(i.matches("a")||i.matches("area"))&&b(i);const l=i.querySelectorAll&&i.querySelectorAll("a, area");l&&l.forEach(b)}})})}).observe(document.body,{childList:!0,subtree:!0})}function a(){g(),f(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){y()}):y()}window[p]={process:y},a()})(),(function(){const p="data-ln-link",d="lnLink";if(window[d]!==void 0)return;var h=null;function b(){h=document.createElement("div"),h.className="ln-link-status",document.body.appendChild(h)}function y(s){h&&(h.textContent=s,h.classList.add("ln-link-status--visible"))}function g(){h&&h.classList.remove("ln-link-status--visible")}function f(s,c){if(!c.target.closest("a, button, input, select, textarea")){var m=s.querySelector("a");if(m){var v=m.getAttribute("href");if(v){if(c.ctrlKey||c.metaKey){window.open(v,"_blank");return}m.click()}}}}function a(s){var c=s.querySelector("a");if(c){var m=c.getAttribute("href");m&&y(m)}}function n(){g()}function e(s){s._lnLinkInit||(s._lnLinkInit=!0,s.querySelector("a")&&(s.addEventListener("click",function(c){f(s,c)}),s.addEventListener("mouseenter",function(){a(s)}),s.addEventListener("mouseleave",n)))}function t(s){if(!s._lnLinkInit){s._lnLinkInit=!0;var c=s.tagName;if(c==="TABLE"||c==="TBODY"){var m=c==="TABLE"&&s.querySelector("tbody")||s,v=m.querySelectorAll("tr");v.forEach(e)}else e(s)}}function i(s){s.hasAttribute&&s.hasAttribute(p)&&t(s);var c=s.querySelectorAll?s.querySelectorAll("["+p+"]"):[];c.forEach(t)}function l(){var s=new MutationObserver(function(c){c.forEach(function(m){m.type==="childList"&&m.addedNodes.forEach(function(v){if(v.nodeType===1&&(i(v),v.tagName==="TR")){var E=v.closest("["+p+"]");E&&e(v)}})})});s.observe(document.body,{childList:!0,subtree:!0})}function r(s){i(s)}window[d]={init:r},b(),l();function o(){r(document.body)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o()})(),(function(){const p="[data-ln-progress]",d="lnProgress";if(window[d]!==void 0)return;function h(e){var t=e.getAttribute("data-ln-progress");return t!==null&&t!==""}function b(e){y(e)}function y(e){var t=e.querySelectorAll(p)||[];t.forEach(function(i){h(i)&&!i[d]&&(i[d]=new g(i))}),e.hasAttribute&&e.hasAttribute("data-ln-progress")&&h(e)&&!e[d]&&(e[d]=new g(e))}function g(e){return this.dom=e,n.call(this),a.call(this),this}function f(){var e=new MutationObserver(function(t){t.forEach(function(i){i.type==="childList"&&i.addedNodes.forEach(function(l){l.nodeType===1&&y(l)})})});e.observe(document.body,{childList:!0,subtree:!0})}f();function a(){var e=this,t=new MutationObserver(function(i){i.forEach(function(l){(l.attributeName==="data-ln-progress"||l.attributeName==="data-ln-progress-max")&&n.call(e)})});t.observe(this.dom,{attributes:!0,attributeFilter:["data-ln-progress","data-ln-progress-max"]})}function n(){var e=parseFloat(this.dom.getAttribute("data-ln-progress"))||0,t=parseFloat(this.dom.getAttribute("data-ln-progress-max"))||100,i=t>0?e/t*100:0;i<0&&(i=0),i>100&&(i=100),this.dom.style.width=i+"%"}window[d]=b,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){window.lnProgress(document.body)}):window.lnProgress(document.body)})()})();
