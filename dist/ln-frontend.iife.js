(function(){"use strict";(function(){const p="data-ln-ajax",d="lnAjax";if(window[d]!==void 0)return;function b(e){if(console.log(e),!e.hasAttribute(p)||e[d])return;e[d]=!0,console.log("constructor called with:",e);let t=m(e);console.log("Items found:",t),v(t.links),y(t.forms)}function v(e){e.forEach(function(t){if(t._lnAjaxAttached)return;const s=t.getAttribute("href");s&&s.includes("#")||(t._lnAjaxAttached=!0,t.addEventListener("click",function(i){if(i.ctrlKey||i.metaKey||i.button===1)return;i.preventDefault();const r=t.getAttribute("href");r&&E("GET",r,null,t)}))})}function y(e){e.forEach(function(t){t._lnAjaxAttached||(t._lnAjaxAttached=!0,t.addEventListener("submit",function(s){s.preventDefault();const i=t.method.toUpperCase(),r=t.action,o=new FormData(t);console.log("Form submitted:",i,r),t.querySelectorAll('button, input[type="submit"]').forEach(function(c){c.disabled=!0}),E(i,r,o,t,function(){t.querySelectorAll('button, input[type="submit"]').forEach(function(c){c.disabled=!1})})}))})}function E(e,t,s,i,r){console.log("Making AJAX request:",e,t),i.classList.add("ln-ajax--loading");let o=t;const c=document.querySelector('meta[name="csrf-token"]'),f=c?c.getAttribute("content"):null;s instanceof FormData&&f&&s.append("_token",f);const h={method:e,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}};if(f&&(h.headers["X-CSRF-TOKEN"]=f),e==="GET"&&s){const u=new URLSearchParams(s);o=t+(t.includes("?")?"&":"?")+u.toString()}else e!=="GET"&&s&&(h.body=s);fetch(o,h).then(u=>u.json()).then(u=>{if(u.title&&(document.title=u.title),u.content)for(let g in u.content){const L=document.getElementById(g);L&&(L.innerHTML=u.content[g])}if(i.tagName==="A"){let g=i.getAttribute("href");g&&window.history.pushState({ajax:!0},"",g)}else i.tagName==="FORM"&&i.method.toUpperCase()==="GET"&&window.history.pushState({ajax:!0},"",o);u.message&&window.lnToast&&window.lnToast.enqueue({type:u.message.type,title:u.message.title,message:u.message.body,data:u.message.data}),i.classList.remove("ln-ajax--loading"),r&&r()}).catch(u=>{console.error("AJAX error:",u),i.classList.remove("ln-ajax--loading"),r&&r()})}function m(e){let t={links:[],forms:[]};if(e.tagName==="A"&&e.getAttribute(p)!=="false")t.links.push(e);else if(e.tagName==="FORM"&&e.getAttribute(p)!=="false")t.forms.push(e);else{let s=e.querySelectorAll('a:not([data-ln-ajax="false"])')||[],i=e.querySelectorAll('form:not([data-ln-ajax="false"])')||[];t.links=Array.from(s),t.forms=Array.from(i)}return t}function a(){new MutationObserver(function(t){t.forEach(function(s){s.type=="childList"&&s.addedNodes.forEach(function(i){i.nodeType===1&&(b(i),i.hasAttribute&&!i.hasAttribute(p)&&i.querySelectorAll("["+p+"]").forEach(function(o){b(o)}))})})}).observe(document.body,{childList:!0,subtree:!0})}a(),window[d]=b;function n(){document.querySelectorAll("["+p+"]").forEach(function(t){b(t)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()})(),(function(){const p="data-ln-modal",d="lnModal";if(window[d]!==void 0)return;function b(n){const e=document.getElementById(n);if(!e){console.warn('Modal with ID "'+n+'" not found');return}e.classList.contains("ln-modal--open")?(e.classList.remove("ln-modal--open"),document.body.classList.remove("ln-modal-open")):(e.classList.add("ln-modal--open"),document.body.classList.add("ln-modal-open"))}function v(n){const e=document.getElementById(n);e&&(e.classList.remove("ln-modal--open"),document.body.classList.remove("ln-modal-open"))}function y(n){const e=n.querySelectorAll("[data-ln-modal-close]"),t=n.id;e.forEach(function(s){s.addEventListener("click",function(i){i.preventDefault(),v(t)})})}function E(n){n.forEach(function(e){e.addEventListener("click",function(t){if(t.ctrlKey||t.metaKey||t.button===1)return;t.preventDefault();const s=e.getAttribute(p);s&&b(s)})})}function m(){const n=document.querySelectorAll("["+p+"]");E(n),document.querySelectorAll("[id]").forEach(function(t){t.classList.contains("ln-modal")&&y(t)}),document.addEventListener("keydown",function(t){(t.key==="Escape"||t.keyCode===27)&&document.querySelectorAll(".ln-modal.ln-modal--open").forEach(function(i){v(i.id)})})}function a(){new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.forEach(function(s){if(s.nodeType===1){s.hasAttribute(p)&&E([s]);const i=s.querySelectorAll("["+p+"]");i.length>0&&E(i),s.id&&s.classList.contains("ln-modal")&&y(s);const r=s.querySelectorAll(".ln-modal");r.length>0&&r.forEach(function(o){y(o)})}})})}).observe(document.body,{childList:!0,subtree:!0})}window[d]={toggle:b,close:v,open:function(n){const e=document.getElementById(n);e&&(e.classList.add("ln-modal--open"),document.body.classList.add("ln-modal-open"))}},a(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m()})(),(function(){const p="data-ln-nav",d="lnNav";if(window[d]!==void 0)return;const b=new WeakMap;function v(n){if(!n.hasAttribute(p)||b.has(n))return;const e=n.getAttribute(p);if(!e)return;const t=y(n,e);b.set(n,t)}function y(n,e){let t=Array.from(n.querySelectorAll("a"));m(t,e,window.location.pathname);const s=function(){t=Array.from(n.querySelectorAll("a")),m(t,e,window.location.pathname)};window.addEventListener("popstate",s);const i=history.pushState;history.pushState=function(){i.apply(history,arguments),t=Array.from(n.querySelectorAll("a")),m(t,e,window.location.pathname)};const r=new MutationObserver(function(o){o.forEach(function(c){c.type==="childList"&&(c.addedNodes.forEach(function(f){if(f.nodeType===1){if(f.tagName==="A")t.push(f),m([f],e,window.location.pathname);else if(f.querySelectorAll){const h=Array.from(f.querySelectorAll("a"));t=t.concat(h),m(h,e,window.location.pathname)}}}),c.removedNodes.forEach(function(f){if(f.nodeType===1){if(f.tagName==="A")t=t.filter(function(h){return h!==f});else if(f.querySelectorAll){const h=Array.from(f.querySelectorAll("a"));t=t.filter(function(u){return!h.includes(u)})}}}))})});return r.observe(n,{childList:!0,subtree:!0}),{navElement:n,activeClass:e,observer:r}}function E(n){try{return new URL(n,window.location.origin).pathname.replace(/\/$/,"")||"/"}catch{return n.replace(/\/$/,"")||"/"}}function m(n,e,t){const s=E(t);n.forEach(function(i){const r=i.getAttribute("href");if(!r)return;const o=E(r);i.classList.remove(e);const c=o===s,f=o!=="/"&&s.startsWith(o+"/");(c||f)&&i.classList.add(e)})}window[d]=v;function a(){document.querySelectorAll("["+p+"]").forEach(function(e){v(e)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a()})(),(function(){const p=window.TomSelect;if(!p){window.lnSelect={initialize:function(){},destroy:function(){},getInstance:function(){return null}};return}const d=new WeakMap;function b(m){if(d.has(m))return;const a=m.getAttribute("data-ln-select");let n={};if(a&&a.trim()!=="")try{n=JSON.parse(a)}catch(s){console.warn("Invalid JSON in data-ln-select attribute:",s)}const t={...{allowEmptyOption:!0,controlInput:null,create:!1,highlight:!0,closeAfterSelect:!0,placeholder:m.getAttribute("placeholder")||"Select...",loadThrottle:300},...n};try{const s=new p(m,t);d.set(m,s);const i=m.closest("form");i&&i.addEventListener("reset",()=>{setTimeout(()=>{s.clear(),s.clearOptions(),s.sync()},0)})}catch(s){console.error("Failed to initialize Tom Select:",s)}}function v(m){const a=d.get(m);a&&(a.destroy(),d.delete(m))}function y(){document.querySelectorAll("select[data-ln-select]").forEach(b)}function E(){new MutationObserver(a=>{a.forEach(n=>{n.addedNodes.forEach(e=>{e.nodeType===1&&(e.matches&&e.matches("select[data-ln-select]")&&b(e),e.querySelectorAll&&e.querySelectorAll("select[data-ln-select]").forEach(b))}),n.removedNodes.forEach(e=>{e.nodeType===1&&(e.matches&&e.matches("select[data-ln-select]")&&v(e),e.querySelectorAll&&e.querySelectorAll("select[data-ln-select]").forEach(v))})})}).observe(document.body,{childList:!0,subtree:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{y(),E()}):(y(),E()),window.lnSelect={initialize:b,destroy:v,getInstance:m=>d.get(m)}})(),(function(){const p="data-ln-tabs",d="lnTabs";if(window[d]!==void 0&&window[d]!==null)return;function b(a=document.body){v(a)}function v(a){if(a.nodeType!==1)return;let n=Array.from(a.querySelectorAll("["+p+"]"));a.hasAttribute&&a.hasAttribute(p)&&n.push(a),n.forEach(function(e){e[d]||(e[d]=new y(e))})}function y(a){return this.dom=a,E.call(this),this}function E(){this.tabs=Array.from(this.dom.querySelectorAll("[data-ln-tab]")),this.panels=Array.from(this.dom.querySelectorAll("[data-ln-panel]")),this.mapTabs={},this.mapPanels={};for(const a of this.tabs){const n=(a.getAttribute("data-ln-tab")||"").toLowerCase().trim();n&&(this.mapTabs[n]=a)}for(const a of this.panels){const n=(a.getAttribute("data-ln-panel")||"").toLowerCase().trim();n&&(this.mapPanels[n]=a)}this.defaultKey=(this.dom.getAttribute("data-ln-tabs-default")||"").toLowerCase().trim()||Object.keys(this.mapTabs)[0]||"",this.autoFocus=(this.dom.getAttribute("data-ln-tabs-focus")||"true").toLowerCase()!=="false",this.tabs.forEach(a=>{a.addEventListener("click",()=>{const n=(a.getAttribute("data-ln-tab")||"").toLowerCase().trim();n&&(location.hash==="#"+n?this.activate(n):location.hash=n)})}),this._hashHandler=()=>{const a=(location.hash||"").replace("#","").toLowerCase();this.activate(a||this.defaultKey)},window.addEventListener("hashchange",this._hashHandler),this._hashHandler()}y.prototype.activate=function(a){var n;(!a||!(a in this.mapPanels))&&(a=this.defaultKey);for(const e in this.mapTabs){const t=this.mapTabs[e],s=e===a;t.setAttribute("data-active",s?"true":"false"),t.setAttribute("aria-selected",s?"true":"false")}for(const e in this.mapPanels){const t=this.mapPanels[e],s=e===a;t.classList.toggle("hidden",!s),t.setAttribute("aria-hidden",s?"false":"true")}if(this.autoFocus){const e=(n=this.mapPanels[a])==null?void 0:n.querySelector('input,button,select,textarea,[tabindex]:not([tabindex="-1"])');e&&setTimeout(()=>e.focus({preventScroll:!0}),0)}};function m(){new MutationObserver(function(n){n.forEach(function(e){e.addedNodes.forEach(function(t){v(t)})})}).observe(document.body,{childList:!0,subtree:!0})}m(),window[d]=b,b(document.body)})(),(function(){const p="data-ln-toast",d="lnToast",b={success:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m5 12 5 5L20 7"/></svg>',error:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>',warn:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 1.67 10.42 18.04H1.58L12 1.67z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>',info:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>'};if(window[d]!==void 0&&window[d]!==null)return;function v(r=document.body){return y(r),s}function y(r){if(!r||r.nodeType!==1)return;let o=Array.from(r.querySelectorAll("["+p+"]"));r.hasAttribute&&r.hasAttribute(p)&&o.push(r),o.forEach(c=>{c[d]||new E(c)})}function E(r){return this.dom=r,r[d]=this,this.timeoutDefault=parseInt(r.getAttribute("data-ln-toast-timeout")||"6000",10),this.max=parseInt(r.getAttribute("data-ln-toast-max")||"5",10),Array.from(r.querySelectorAll("[data-ln-toast-item]")).forEach(o=>{m(o)}),this}function m(r){const o=((r.getAttribute("data-type")||"info")+"").toLowerCase(),c=r.getAttribute("data-title"),f=(r.innerText||r.textContent||"").trim();r.className="ln-toast__item",r.removeAttribute("data-ln-toast-item");const h=document.createElement("div");h.className="ln-toast__card ln-toast__card--"+o,h.setAttribute("role",o==="error"?"alert":"status"),h.setAttribute("aria-live",o==="error"?"assertive":"polite");const u=document.createElement("div");u.className="ln-toast__side",u.innerHTML=b[o]||b.info;const g=document.createElement("div");g.className="ln-toast__content";const L=document.createElement("div");L.className="ln-toast__head";const w=document.createElement("strong");w.className="ln-toast__title",w.textContent=c||(o==="success"?"Success":o==="error"?"Error":o==="warn"?"Warning":"Information");const C=document.createElement("button");if(C.type="button",C.className="ln-toast__close",C.setAttribute("aria-label","Close"),C.innerHTML="&times;",C.addEventListener("click",()=>n(r)),L.appendChild(w),g.appendChild(L),g.appendChild(C),f){const T=document.createElement("div");T.className="ln-toast__body";const x=document.createElement("p");x.textContent=f,T.appendChild(x),g.appendChild(T)}h.appendChild(u),h.appendChild(g),r.innerHTML="",r.appendChild(h),requestAnimationFrame(()=>r.classList.add("ln-toast__item--in"))}function a(r,o){for(;r.dom.children.length>=r.max;)r.dom.removeChild(r.dom.firstElementChild);r.dom.appendChild(o),requestAnimationFrame(()=>o.classList.add("ln-toast__item--in"))}function n(r){!r||!r.parentNode||(clearTimeout(r._timer),r.classList.remove("ln-toast__item--in"),r.classList.add("ln-toast__item--out"),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},200))}function e(r={}){let o=r.container;if(typeof o=="string"&&(o=document.querySelector(o)),o instanceof HTMLElement||(o=document.querySelector("["+p+"]")||document.getElementById("ln-toast-container")),!o)return null;const c=o[d]||new E(o),f=Number.isFinite(r.timeout)?r.timeout:c.timeoutDefault,h=(r.type||"info").toLowerCase(),u=document.createElement("li");u.className="ln-toast__item";const g=document.createElement("div");g.className="ln-toast__card ln-toast__card--"+h,g.setAttribute("role",h==="error"?"alert":"status"),g.setAttribute("aria-live",h==="error"?"assertive":"polite");const L=document.createElement("div");L.className="ln-toast__side",L.innerHTML=b[h]||b.info;const w=document.createElement("div");w.className="ln-toast__content";const C=document.createElement("div");C.className="ln-toast__head";const T=document.createElement("strong");T.className="ln-toast__title",T.textContent=r.title||(h==="success"?"Success":h==="error"?"Error":h==="warn"?"Warning":"Information");const x=document.createElement("button");if(x.type="button",x.className="ln-toast__close",x.setAttribute("aria-label","Close"),x.innerHTML="&times;",x.addEventListener("click",()=>n(u)),C.appendChild(T),w.appendChild(C),w.appendChild(x),r.message||r.data&&r.data.errors){const q=document.createElement("div");if(q.className="ln-toast__body",r.message)if(Array.isArray(r.message)){const M=document.createElement("ul");r.message.forEach(function(D){const l=document.createElement("li");l.textContent=D,M.appendChild(l)}),q.appendChild(M)}else{const M=document.createElement("p");M.textContent=r.message,M.style.margin="0",q.appendChild(M)}if(r.data&&r.data.errors){const M=document.createElement("ul");Object.values(r.data.errors).flat().forEach(D=>{const l=document.createElement("li");l.textContent=D,M.appendChild(l)}),q.appendChild(M)}w.appendChild(q)}return g.appendChild(L),g.appendChild(w),u.appendChild(g),a(c,u),f>0&&(u._timer=setTimeout(()=>n(u),f)),u}function t(r){let o=r;typeof o=="string"&&(o=document.querySelector(o)),o instanceof HTMLElement||(o=document.querySelector("["+p+"]")||document.getElementById("ln-toast-container")),o&&Array.from(o.children).forEach(n)}const s=function(r){return v(r)};s.enqueue=e,s.clear=t,new MutationObserver(r=>{r.forEach(o=>o.addedNodes.forEach(c=>y(c)))}).observe(document.body,{childList:!0,subtree:!0}),window[d]=s,window.addEventListener("ln-toast:enqueue",function(r){r.detail&&s.enqueue(r.detail)}),v(document.body)})(),(function(){const p="data-ln-upload",d="lnUpload",b="data-ln-upload-dict",v="data-ln-upload-accept",y="data-ln-upload-context";if(window[d]!==void 0)return;function E(o,c){const f=o.querySelector("["+b+'="'+c+'"]');return f?f.textContent:c}function m(o){if(o===0)return"0 B";const c=1024,f=["B","KB","MB","GB"],h=Math.floor(Math.log(o)/Math.log(c));return parseFloat((o/Math.pow(c,h)).toFixed(1))+" "+f[h]}function a(o){return o.split(".").pop().toLowerCase()}function n(o){return o==="docx"&&(o="doc"),["pdf","doc","epub"].includes(o)?"ln-icon-file-"+o:"ln-icon-file"}function e(o,c){if(!c)return!0;const f="."+a(o.name);return c.split(",").map(function(u){return u.trim().toLowerCase()}).includes(f.toLowerCase())}function t(o,c,f){o.dispatchEvent(new CustomEvent(c,{bubbles:!0,detail:f}))}function s(o){if(o.hasAttribute("data-ln-upload-initialized"))return;o.setAttribute("data-ln-upload-initialized","true");const c=o.querySelector(".ln-upload__zone"),f=o.querySelector(".ln-upload__list"),h=o.getAttribute(v)||"";let u=o.querySelector('input[type="file"]');u||(u=document.createElement("input"),u.type="file",u.multiple=!0,u.style.display="none",h&&(u.accept=h.split(",").map(function(l){return l=l.trim(),l.startsWith(".")?l:"."+l}).join(",")),o.appendChild(u));const g=o.getAttribute(p)||"/files/upload",L=o.getAttribute(y)||"",w=new Map;let C=0;function T(){const l=document.querySelector('meta[name="csrf-token"]');return l?l.getAttribute("content"):""}function x(l){if(!e(l,h)){const A=E(o,"invalid-type");t(o,"ln-upload:invalid",{file:l,message:A}),window.dispatchEvent(new CustomEvent("ln-toast:enqueue",{detail:{type:"error",title:"Invalid File",message:A||"This file type is not allowed"}}));return}const _="file-"+ ++C,S=a(l.name),z=n(S),N=document.createElement("li");N.className="ln-upload__item ln-upload__item--uploading "+z,N.setAttribute("data-file-id",_);const F=document.createElement("span");F.className="ln-upload__name",F.textContent=l.name;const I=document.createElement("span");I.className="ln-upload__size",I.textContent="0%";const k=document.createElement("button");k.type="button",k.className="ln-upload__remove",k.title=E(o,"remove"),k.textContent="Ã—",k.disabled=!0;const U=document.createElement("div");U.className="ln-upload__progress";const B=document.createElement("div");B.className="ln-upload__progress-bar",U.appendChild(B),N.appendChild(F),N.appendChild(I),N.appendChild(k),N.appendChild(U),f.appendChild(N);const H=new FormData;H.append("file",l),H.append("context",L);const O=new XMLHttpRequest;O.upload.addEventListener("progress",function(A){if(A.lengthComputable){const j=Math.round(A.loaded/A.total*100);B.style.width=j+"%",I.textContent=j+"%"}}),O.addEventListener("load",function(){if(O.status>=200&&O.status<300){var A;try{A=JSON.parse(O.responseText)}catch{P("Invalid response");return}N.classList.remove("ln-upload__item--uploading"),I.textContent=m(A.size||l.size),k.disabled=!1,w.set(_,{serverId:A.id,name:A.name,size:A.size}),q(),t(o,"ln-upload:uploaded",{localId:_,serverId:A.id,name:A.name})}else{var j="Upload failed";try{var R=JSON.parse(O.responseText);j=R.message||j}catch{}P(j)}}),O.addEventListener("error",function(){P("Network error")});function P(A){N.classList.remove("ln-upload__item--uploading"),N.classList.add("ln-upload__item--error"),B.style.width="100%",I.textContent=E(o,"error"),k.disabled=!1,t(o,"ln-upload:error",{file:l,message:A}),window.dispatchEvent(new CustomEvent("ln-toast:enqueue",{detail:{type:"error",title:"Upload Error",message:A||E(o,"upload-failed")||"Failed to upload file"}}))}O.open("POST",g),O.setRequestHeader("X-CSRF-TOKEN",T()),O.setRequestHeader("Accept","application/json"),O.send(H)}function q(){o.querySelectorAll('input[name="file_ids[]"]').forEach(function(l){l.remove()}),w.forEach(function(l){const _=document.createElement("input");_.type="hidden",_.name="file_ids[]",_.value=l.serverId,o.appendChild(_)})}function M(l){const _=w.get(l),S=f.querySelector('[data-file-id="'+l+'"]');if(!_||!_.serverId){S&&S.remove(),w.delete(l),q();return}S&&S.classList.add("ln-upload__item--deleting"),fetch("/files/"+_.serverId,{method:"DELETE",headers:{"X-CSRF-TOKEN":T(),Accept:"application/json"}}).then(z=>{z.status===200?(S&&S.remove(),w.delete(l),q(),t(o,"ln-upload:removed",{localId:l,serverId:_.serverId})):(S&&S.classList.remove("ln-upload__item--deleting"),window.dispatchEvent(new CustomEvent("ln-toast:enqueue",{detail:{type:"error",title:"Error",message:E(o,"delete-error")||"Failed to delete file"}})))}).catch(z=>{console.error("Delete error:",z),S&&S.classList.remove("ln-upload__item--deleting"),window.dispatchEvent(new CustomEvent("ln-toast:enqueue",{detail:{type:"error",title:"Network Error",message:"Could not connect to server"}}))})}function D(l){Array.from(l).forEach(function(_){x(_)}),u.value=""}c.addEventListener("click",function(){u.click()}),u.addEventListener("change",function(){D(this.files)}),c.addEventListener("dragenter",function(l){l.preventDefault(),l.stopPropagation(),c.classList.add("ln-upload__zone--dragover")}),c.addEventListener("dragover",function(l){l.preventDefault(),l.stopPropagation(),c.classList.add("ln-upload__zone--dragover")}),c.addEventListener("dragleave",function(l){l.preventDefault(),l.stopPropagation(),c.classList.remove("ln-upload__zone--dragover")}),c.addEventListener("drop",function(l){l.preventDefault(),l.stopPropagation(),c.classList.remove("ln-upload__zone--dragover"),D(l.dataTransfer.files)}),f.addEventListener("click",function(l){if(l.target.classList.contains("ln-upload__remove")){const _=l.target.closest(".ln-upload__item");_&&M(_.getAttribute("data-file-id"))}}),o.lnUploadAPI={getFileIds:function(){return Array.from(w.values()).map(function(l){return l.serverId})},getFiles:function(){return Array.from(w.values())},clear:function(){w.forEach(function(l){l.serverId&&fetch("/files/"+l.serverId,{method:"DELETE",headers:{"X-CSRF-TOKEN":T(),Accept:"application/json"}})}),w.clear(),f.innerHTML="",q(),t(o,"ln-upload:cleared",{})}}}function i(){document.querySelectorAll("["+p+"]").forEach(s)}function r(){new MutationObserver(function(c){c.forEach(function(f){f.type==="childList"&&f.addedNodes.forEach(function(h){h.nodeType===1&&(h.hasAttribute(p)&&s(h),h.querySelectorAll("["+p+"]").forEach(s))})})}).observe(document.body,{childList:!0,subtree:!0})}window[d]={init:s,initAll:i},r(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i()})(),(function(){const p="lnExternalLinks";if(window[p]!==void 0)return;function d(n,e,t){n.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))}function b(n){return n.hostname&&n.hostname!==window.location.hostname}function v(n){n.getAttribute("data-ln-external-link")!=="processed"&&b(n)&&(n.target="_blank",n.rel="noopener noreferrer",n.setAttribute("data-ln-external-link","processed"),d(n,"ln-external-links:processed",{link:n,href:n.href}))}function y(n){n=n||document.body,n.querySelectorAll("a, area").forEach(function(t){v(t)})}function E(){document.body.addEventListener("click",function(n){const e=n.target.closest("a, area");e&&e.getAttribute("data-ln-external-link")==="processed"&&d(e,"ln-external-links:clicked",{link:e,href:e.href,text:e.textContent||e.title||""})})}function m(){new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.forEach(function(s){if(s.nodeType===1){s.matches&&(s.matches("a")||s.matches("area"))&&v(s);const i=s.querySelectorAll&&s.querySelectorAll("a, area");i&&i.forEach(v)}})})}).observe(document.body,{childList:!0,subtree:!0})}function a(){E(),m(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){y()}):y()}window[p]={process:y},a()})(),(function(){const p="[data-ln-box]",d="lnBox";if(window[d]!==void 0)return;function b(t){v(t)}function v(t){let s=t.querySelectorAll(p)||[];t.hasAttribute("data-ln-box")&&s.push(t),s.forEach(function(i){i[d]||(i[d]=new y(i))})}function y(t){return this.dom=t,m.call(this),a.call(this),this}function E(){new MutationObserver(function(s){s.forEach(function(i){i.type==="childList"&&i.addedNodes.forEach(function(r){r.nodeType===1&&v(r)})})}).observe(document.body,{childList:!0,subtree:!0})}E();function m(){return this.buttons={},this.buttons.collapse=this.dom.querySelectorAll('[data-ln-box-action="collapse"]'),this.buttons.expand=this.dom.querySelectorAll('[data-ln-box-action="expand"]'),this}function a(){this.buttons.collapse.forEach(t=>{t.addEventListener("click",s=>{n.call(this)},!1)}),this.buttons.expand.forEach(t=>{t.addEventListener("click",s=>{e.call(this)},!1)})}function n(){this.dom.setAttribute("data-ln-box","collapsed")}function e(){this.dom.setAttribute("data-ln-box","")}window[d]=b,y.prototype.collapse=n,y.prototype.expand=e,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){window.lnBox(document.body)}):window.lnBox(document.body)})(),(function(){const p="[data-ln-progress]",d="lnProgress";if(window[d]!==void 0)return;function b(e){v(e)}function v(e){let t=e.querySelectorAll(p)||[];e.hasAttribute("data-ln-progress")&&t.push(e),t.forEach(function(s){s[d]||(s[d]=new y(s))})}function y(e){return this.dom=e,a.call(this),m.call(this),this}function E(){new MutationObserver(function(t){t.forEach(function(s){s.type==="childList"&&s.addedNodes.forEach(function(i){i.nodeType===1&&v(i)})})}).observe(document.body,{childList:!0,subtree:!0})}E();function m(){new MutationObserver(t=>{t.forEach(s=>{s.attributeName.includes("data-progress")&&(this.values=s.target.dataset,n.call(this))})}).observe(this.dom,{attributes:!0,attributeOldValue:!0})}function a(){return this.values={},this.values.progressMin=this.dom.dataset.progressMin||0,this.values.progressMax=this.dom.dataset.progressMax||100,this.values.progressValue=this.dom.dataset.progressValue||100,n.call(this),this}function n(){let e=this.values.progressMax-this.values.progressMin,s=(this.values.progressValue-this.values.progressMin)*100/e;s<0&&(s=0),this.dom.style.width=s+"%"}window[d]=b,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){window.lnProgress(document.body)}):window.lnProgress(document.body)})()})();
