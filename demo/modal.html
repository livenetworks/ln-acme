<!DOCTYPE html>
<html lang="mk">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Modal — ln-acme</title>
	<link rel="stylesheet" href="../dist/ln-acme.css">
	<link rel="stylesheet" href="demo.css">
	<script src="../js/ln-toast/ln-toast.js" defer></script>
	<script src="../js/ln-toggle/ln-toggle.js" defer></script>
	<script src="../js/ln-nav/ln-nav.js" defer></script>
	<script src="../js/ln-modal/ln-modal.js" defer></script>
	<script src="demo.js" defer></script>
</head>
<body>
	<!-- Toast container -->
	<div data-ln-toast></div>

	<div class="app-wrapper">
		<!-- Header -->
		<div class="header">
			<div class="header-left">
				<button class="menu-toggle" data-ln-toggle-for="demo-sidebar">
					<span class="ln-icon-menu"></span>
				</button>
				<h1>Modal</h1>
			</div>
			<div class="header-right">
				<div class="header-actions">
					<button class="btn btn--secondary" onclick="window.lnToast.enqueue({type:'info', title:'Инфо', message:'JS модал компонента.'})">Test Toast</button>
				</div>
			</div>
		</div>

		<!-- App Body -->
		<div class="app-body">
		<!-- Sidebar -->
		<aside class="sidebar open" id="demo-sidebar" data-ln-toggle="open">
			<div class="sidebar-header">
				<button class="ln-icon-close" data-ln-toggle-for="demo-sidebar" data-ln-toggle-action="close"></button>
			<img class="logo" src="ln-acme-logo.png" alt="ln-acme">
				<span class="app-name">acme-gui</span>
			</div>

			<div class="sidebar-content">
				<nav class="nav" data-ln-nav="active">
					<ul>
						<li><a href="index.html"><span class="nav-icon ln-icon-home"></span><span class="nav-label">Dashboard</span></a></li>
					</ul>

					<h6 class="nav-section">CSS компоненти</h6>
					<ul>
						<li><a href="typography.html"><span class="nav-label">Typography</span></a></li>
						<li><a href="cards.html"><span class="nav-label">Cards</span></a></li>
						<li><a href="tables.html"><span class="nav-label">Tables</span></a></li>
						<li><a href="forms.html"><span class="nav-label">Forms &amp; Buttons</span></a></li>
						<li><a href="layout.html"><span class="nav-label">Layout &amp; Grid</span></a></li>
						<li><a href="sections.html"><span class="nav-label">Sections</span></a></li>
						<li><a href="icons.html"><span class="nav-label">Icons</span></a></li>
						<li><a href="utilities.html"><span class="nav-label">Utilities</span></a></li>
					</ul>

					<h6 class="nav-section">JS компоненти</h6>
					<ul>
						<li><a href="accordion.html"><span class="nav-label">Accordion</span></a></li>
						<li><a href="ajax.html"><span class="nav-label">AJAX</span></a></li>
						<li><a href="datatable.html"><span class="nav-label">Data Table</span></a></li>
						<li><a href="external-links.html"><span class="nav-label">External Links</span></a></li>
						<li><a href="nav.html"><span class="nav-label">Nav</span></a></li>
						<li><a href="progress.html"><span class="nav-label">Progress</span></a></li>
						<li><a href="select.html"><span class="nav-label">Select</span></a></li>
						<li><a href="toggle.html"><span class="nav-label">Toggle</span></a></li>
						<li><a href="modal.html"><span class="nav-label">Modal</span></a></li>
						<li><a href="toast.html"><span class="nav-label">Toast</span></a></li>
						<li><a href="tabs.html"><span class="nav-label">Tabs</span></a></li>
						<li><a href="upload.html"><span class="nav-label">Upload</span></a></li>
					</ul>
				</nav>
			</div>

			<div class="sidebar-footer">
				<small>acme-gui v1.0.0</small>
			</div>
		</aside>

		<!-- Main Panel -->
		<div class="main-panel">

			<!-- Content -->
			<div class="content">
					<h1>Modal</h1>
					<p>JS компонента за модални прозорци. Отвора/затвора преку <code>data-ln-modal</code>. ESC затвора.</p>

		<!-- Triggers -->
		<section class="section-card">
			<header><h3>Примери</h3></header>
			<main>
				<nav class="demo-actions">
					<button data-ln-modal="demo-basic" class="btn">Basic Modal</button>
					<button data-ln-modal="demo-form" class="btn btn--secondary">Form Modal</button>
					<button data-ln-modal="demo-large" class="btn btn--secondary">Large Modal</button>
				</nav>
			</main>
		</section>

		<!-- Basic Modal -->
		<div class="ln-modal" id="demo-basic">
			<div class="ln-modal__content">
				<header>
					<h3>Basic Modal</h3>
					<button class="ln-icon-close" data-ln-modal-close></button>
				</header>
				<main>
					<p>Ова е основен модал со наслов и содржина.</p>
					<p>Притисни ESC или кликни затвори.</p>
				</main>
				<footer>
					<button data-ln-modal-close class="btn btn--secondary">Затвори</button>
				</footer>
			</div>
		</div>

		<!-- Form Modal -->
		<div class="ln-modal" id="demo-form">
			<div class="ln-modal__content">
				<header>
					<h3>Додај корисник</h3>
					<button class="ln-icon-close" data-ln-modal-close></button>
				</header>
				<main>
					<form>
						<div class="form-group">
							<label for="m-name">Име</label>
							<input type="text" id="m-name" placeholder="Внесете име...">
						</div>
						<div class="form-group">
							<label for="m-email">Email</label>
							<input type="email" id="m-email" placeholder="email@example.com">
						</div>
						<div class="form-group">
							<label for="m-role">Улога</label>
							<select id="m-role">
								<option>Корисник</option>
								<option>Администратор</option>
								<option>Модератор</option>
							</select>
						</div>
					</form>
				</main>
				<footer>
					<button data-ln-modal-close class="btn btn--secondary">Откажи</button>
					<button type="submit" class="btn">Зачувај</button>
				</footer>
			</div>
		</div>

		<!-- Large Modal -->
		<div class="ln-modal" id="demo-large">
			<div class="ln-modal__content ln-modal__content--lg">
				<header>
					<h3>Голем модал</h3>
					<button class="ln-icon-close" data-ln-modal-close></button>
				</header>
				<main>
					<p>Поголем модал за повеќе содржина. Класата <code>.ln-modal__content--lg</code> го зголемува.</p>
					<table>
						<thead><tr><th>Име</th><th>Статус</th><th>Бодови</th></tr></thead>
						<tbody>
							<tr><td>Марко</td><td><span class="pass">OK</span></td><td class="numeric">95</td></tr>
							<tr><td>Ана</td><td><span class="pass">OK</span></td><td class="numeric">88</td></tr>
							<tr><td>Иван</td><td><span class="fail">Грешка</span></td><td class="numeric">42</td></tr>
						</tbody>
					</table>
				</main>
				<footer>
					<button data-ln-modal-close class="btn btn--secondary">Затвори</button>
				</footer>
			</div>
		</div>

		<!-- Events -->
		<section class="section-card">
			<header><h3>Events</h3></header>
			<main>
				<article>
					<h4>Lifecycle настани</h4>
					<table>
						<thead><tr><th>Настан</th><th>Cancelable</th><th>Кога</th><th><code>detail</code></th></tr></thead>
						<tbody>
							<tr><td><code>ln-modal:before-open</code></td><td>✅</td><td>Пред отварање</td><td><code>{ modalId, target }</code></td></tr>
							<tr><td><code>ln-modal:open</code></td><td>❌</td><td>Модалот се отвори</td><td><code>{ modalId, target }</code></td></tr>
							<tr><td><code>ln-modal:before-close</code></td><td>✅</td><td>Пред затварање</td><td><code>{ modalId, target }</code></td></tr>
							<tr><td><code>ln-modal:close</code></td><td>❌</td><td>Модалот се затвори</td><td><code>{ modalId, target }</code></td></tr>
						</tbody>
					</table>
				</article>
				<article>
					<h4>Живо демо</h4>
					<nav class="demo-actions">
						<button data-ln-modal="demo-events" class="btn btn--secondary">Отвори модал (следи events)</button>
					</nav>
					<output id="modal-event-log">Уште нема настани.</output>
				</article>
				<article>
					<h4>Код</h4>
					<pre><code>// Откажи отварање условно (cancelable)
document.addEventListener('ln-modal:before-open', function(e) {
    if (e.detail.modalId === 'confirm-dialog' &amp;&amp; !formIsValid()) {
        e.preventDefault(); // модалот нема да се отвори
    }
});

// Спречи затварање (unsaved changes)
document.getElementById('edit-modal').addEventListener('ln-modal:before-close', function(e) {
    if (hasUnsavedChanges()) {
        e.preventDefault();
    }
});

document.addEventListener('ln-modal:open', function(e) {
    console.log('Отворен:', e.detail.modalId);
});

document.addEventListener('ln-modal:close', function(e) {
    if (e.detail.modalId === 'confirm-dialog') {
        // reset форма, исчисти state итн.
    }
});</code></pre>
				</article>
			</main>
		</section>

		<!-- Events demo modal -->
		<div class="ln-modal" id="demo-events">
			<div class="ln-modal__content ln-modal__content--sm">
				<header>
					<h3>Events демо</h3>
					<button class="ln-icon-close" data-ln-modal-close></button>
				</header>
				<main>
					<p>Отварањето и затварањето на овој модал испраќа <code>ln-modal:open</code> и <code>ln-modal:close</code> настани.</p>
				</main>
				<footer>
					<button data-ln-modal-close class="btn btn--secondary">Затвори</button>
				</footer>
			</div>
		</div>

		<!-- HTML -->
		<section class="section-card">
			<header><h3>HTML</h3></header>
			<main>
				<pre><code>&lt;!-- Trigger копче --&gt;
&lt;button data-ln-modal="my-modal"&gt;Отвори&lt;/button&gt;

&lt;!-- Modal --&gt;
&lt;div class="ln-modal" id="my-modal"&gt;
    &lt;div class="ln-modal__content"&gt;
        &lt;header&gt;
            &lt;h3&gt;Наслов&lt;/h3&gt;
            &lt;button class="ln-icon-close" data-ln-modal-close&gt;&lt;/button&gt;
        &lt;/header&gt;
        &lt;main&gt;
            &lt;p&gt;Содржина...&lt;/p&gt;
        &lt;/main&gt;
        &lt;footer&gt;
            &lt;button data-ln-modal-close class="btn btn--secondary"&gt;Откажи&lt;/button&gt;
            &lt;button type="submit" class="btn"&gt;Зачувај&lt;/button&gt;
        &lt;/footer&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Големини: default, --sm, --md, --lg, --xl --&gt;
&lt;div class="ln-modal__content ln-modal__content--lg"&gt;

&lt;!-- JS API --&gt;
&lt;script&gt;
    window.lnModal.open('my-modal');
    window.lnModal.close('my-modal');
    window.lnModal.toggle('my-modal');
&lt;/script&gt;</code></pre>
			</main>
		</section>
			</div>

			<!-- Footer -->
			<footer class="footer">
				<span>acme-gui &copy; 2026 LiveNetworks</span>
				<span>ln-acme v1.0.0</span>
			</footer>

		</div>
	</div>
	</div>

	<script>
		(function() {
			var log = document.getElementById('modal-event-log');
			if (!log) return;

			function _update(eventName, detail) {
				var time = new Date().toLocaleTimeString('mk');
				log.textContent = eventName + ' — ' + detail.modalId + ' (' + time + ')';
			}

			document.addEventListener('ln-modal:before-open', function(e) { _update('ln-modal:before-open', e.detail); });
			document.addEventListener('ln-modal:open', function(e) { _update('ln-modal:open', e.detail); });
			document.addEventListener('ln-modal:before-close', function(e) { _update('ln-modal:before-close', e.detail); });
			document.addEventListener('ln-modal:close', function(e) { _update('ln-modal:close', e.detail); });
		})();
	</script>
</body>
</html>